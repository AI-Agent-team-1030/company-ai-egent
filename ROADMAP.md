# 法人AI ロードマップ

**最終更新**: 2025年11月23日
**戦略**: 既存機能を磨き上げ、コア機能で勝負する

---

## 🎯 プロダクトの核心

### 法人AIの3つの使い方

```
┌─────────────────────────────────────────────────────┐
│  法人AI = 3つの使い方を明確に区別                    │
├─────────────────────────────────────────────────────┤
│                                                     │
│  ① 社内チャットボット（軽量・日常使い）              │
│     ↓                                               │
│  【AIチャット】- Slack的な使い方                     │
│  - 社内情報を検索                                    │
│  - ナレッジ・ドキュメントから回答                    │
│  - チャット履歴を残す ← 重要                        │
│  - 「〇〇の資料ある？」「今どういう状況？」         │
│  - レスポンス: < 3秒                                 │
│                                                     │
│  ② 本格的なAIエージェント（重厚・成果物作成）       │
│     ↓                                               │
│  【タスク管理】- ゴール + タスク統合                 │
│  - 「いつまでにこの案件をこうしたい」と入力         │
│  - エージェントが全部動く                            │
│  - 複数エージェントが自動連携                        │
│  - タスクリストが自動生成される                     │
│  - タスクがバーっと見れる                            │
│  - 「今どういう状況？」を確認                       │
│  - タスクごとの進捗・ステータス                     │
│  - 成果物を生成（会議資料、提案書など）             │
│  - レスポンス: 30秒〜3分                             │
│                                                     │
└─────────────────────────────────────────────────────┘
```

### なぜこの区別が重要か？

**1. ユーザーの使い方が異なる**
- 社内チャットボット: 毎日使う、サクッと知りたい
- タスク管理（ゴール + タスク統合）: たまに使う（週1-2回）、成果物が必要な時、進捗確認したい時

**2. システムの作りが異なる**
- 社内チャットボット: 高速、シンプルなRAG、チャット履歴
- タスク管理（ゴール + タスク統合）: 時間かかってもOK、複雑な連携、成果物生成、リアルタイム更新、進捗可視化

**3. デモでの訴求が異なる**
- 社内チャットボット: 「便利！」（Slack的）
- タスク管理（ゴール + タスク統合）: 「すごい！」（全部やってくれる）+ 「わかりやすい！」（進捗が見える）

**4. 連携の流れ**
```
タスク管理で「いつまでにこれやって」とゴール入力
  ↓
エージェントが自動実行
  ↓
タスクリストが自動生成
  ↓
同じページで進捗確認（バーっと見れる）
  ↓
成果物完成
  ↓
AIチャットで「どうなった？」と確認
```

---

## 📊 機能の分類

### 🔥 コア機能（7つ）

#### 1. ホーム（旧：ダッシュボード）
**現状**: リアルタイム進行状況、タスク完了率、アナリティックス
**改良後**: 組織の健康状態を表示
- **既存のアナリティックスをそのまま活用** ← 上司からのフィードバック
- 各部署の稼働状況
- AIエージェントの活動状況
- 組織全体のアクティビティ
- シンプルでわかりやすい

**優先度**: ⭐⭐⭐⭐⭐
**1ヶ月目**: 既存のアナリティックスを活かして組織健康状態を表示
**3ヶ月目**: リアルタイム更新、アラート機能

**実装方針**: analyticsページのコンポーネントをホームに統合

---

#### 2. AIチャット 💬 **社内チャットボット** 🔥 **最速で売れる機能**
**現状**: 経営AIとの対話、RAGで情報取得
**改良後**:
- **RAG最適化（全部じゃなく最適なものだけ）← 最優先**
- **参照したナレッジ/ドキュメントを明示** ← 超重要
  - どのナレッジを引っ張ったか表示
  - 出典を明確にする
- ストリーミング応答の改善
- **チャット履歴を残す**（永続保存）
- 「ナレッジ化」ボタン（よく聞かれる質問を保存）

**優先度**: ⭐⭐⭐⭐⭐（最高）
**1ヶ月目**: **RAG最適化、参照元表示**、ストリーミング安定化、履歴管理
**3ヶ月目**: 高度な検索、レコメンド

**位置づけ**: 日常的に使う軽量な社内チャットボット。**価値が伝わる、最速で売れる機能**

---

#### 3. ナレッジベース 📚
**現状**: 組織の知識を蓄積・共有
**改良後**:
- チャットから簡単にナレッジ化
- 「これ毎回聞かれるわ」→ ボタン1つで保存
- 部署内共有 or 全社共有の選択
- 使用回数・評価のトラッキング
- 検索の高速化

**優先度**: ⭐⭐⭐⭐⭐
**1ヶ月目**: チャットからのナレッジ化機能
**3ヶ月目**: 自動カテゴリ分類、レコメンド

**連携**: AIチャット ⇔ ナレッジベース

---

#### 4. ドキュメント管理 📄
**現状**: レポート、提案書、マニュアルの管理
**改良後**:
- ファイルアップロード（PDF/DOCX）
- AIがテキスト抽出 + 検索可能に
- チャットで「〇〇の会議資料ある？」と聞ける
- 自動生成した成果物を自動保存
- 部署ごとのアクセス制御

**優先度**: ⭐⭐⭐⭐⭐
**1ヶ月目**: ファイルアップロード、テキスト抽出
**3ヶ月目**: 高度な検索、自動分類

**連携**: ゴール管理 → 成果物 → ドキュメント管理に自動保存

---

#### 5. 組織管理 🏢
**現状**: 組織図・マインドマップ表示
**改良後**:
- 法人 → 部署 → ユーザーの階層管理
- 権限管理（部署ごとのデータ分離）
- ユーザー招待機能
- 組織図の可視化（誰がどの部署にいるか）

**優先度**: ⭐⭐⭐⭐
**1ヶ月目**: 基本的な組織管理（法人・部署・ユーザー）
**3ヶ月目**: 詳細な権限管理、組織図の可視化

---

#### 6. エージェント管理 🤖
**現状**: エージェントページが存在
**改良後**:
- エージェント一覧・カタログ表示
- **プロンプトの編集・カスタマイズ** ← 超重要
- 新しいエージェントの追加
- システムエージェント vs カスタムエージェント
- 依存関係の管理
- 実行統計の表示（使用回数、成功率、コストなど）

**優先度**: ⭐⭐⭐⭐⭐
**1ヶ月目**: 一覧表示、プロンプト編集、システムエージェント登録
**3ヶ月目**: カスタムエージェント作成、テンプレート機能

**詳細**: AGENT_MANAGEMENT_SPEC.md 参照

---

#### 7. タスク管理 📋🎯 **ゴール + タスク統合**
**現状**: goalsページとtasksページが存在
**改良後（統合）**:
- **ゴール作成機能**
  - 「いつまでにこの案件をこうしたい」と入力
  - エージェントが全部動く ← 重要
  - 複数エージェントが自動連携
- **タスクの自動生成**
  - ゴールから必要なタスクを自動で分解
  - タスクリストがバーっと見れる
  - エージェントが勝手にタスクを作る
- **進捗確認**
  - 「今どういう状況？」を確認できる
  - タスクごとの進捗・ステータス（未着手・進行中・完了）
  - リアルタイム更新（Supabase Realtime）
- **成果物の生成**
  - 会議資料、レポート、提案書
  - ドキュメント管理への自動保存
- **ゴールとタスクの階層**
  - ゴール（大きな目標）
    - タスク1（自動生成）
    - タスク2（自動生成）
    - タスク3（自動生成）

**優先度**: ⭐⭐⭐⭐⭐
**1ヶ月目**: 基本設計（Phase 2で実装開始）
**2ヶ月目**: ゴール作成、タスク自動生成、成果物生成
**3ヶ月目**: テンプレート機能、カスタマイズ

**位置づけ**: 「ここまでやってほしい」と言ったら全部やってくれる。ゴールとタスクが統合された機能。

**連携**: エージェント管理 ⇔ タスク管理（ゴール + タスク統合）⇔ ドキュメント管理

**従来のタスク管理との違い**:
- ❌ 手動でタスクを作成する（Notion、Asana的）
- ✅ ゴールを入力 → エージェントが自動でタスクを分解
- ✅ タスクリストがバーっと見れる
- ✅ 「今どういう状況？」が一目でわかる

**ページ統合**:
- `app/(app)/goals` と `app/(app)/tasks` を統合
- → `app/(app)/tasks`（ゴール + タスク統合ページ）

---

### ✅ 必要な機能（2つ）

#### 8. 設定 ⚙️
**現状**: プロフィール管理、通知設定
**改良後**:
- 法人設定（法人情報、プラン）
- ユーザー設定（プロフィール、パスワード）
- **AI設定** 🔥🔥🔥 **最優先、すぐできる**
  - **使用するAIモデルの選択**（2025年11月最新版）
  - **Anthropic (Claude)**:
    - 👑 Claude Opus 4.1（最高性能、SWE-bench 74.5%、$15/1M入力）
    - ⚡ Claude Sonnet 4.5（世界最高のコーディング、$3/1M入力）
    - 🚀 Claude Haiku 4.5（最速、日常チャット推奨、$1/1M入力）← **デフォルト推奨**
  - **OpenAI (GPT)**:
    - 🌟 GPT-5.1（最新、アダプティブ推論、$1.25/1M入力）
    - 🔸 GPT-5（最高の知能、AIME 94.6%、$1.25/1M入力）
    - 🔹 GPT-5 Mini（軽量、高速、$0.25/1M入力）
    - 📦 GPT-5 Nano（超低コスト、$0.05/1M入力）← **コスト重視の場合**
  - **Google (Gemini)**:
    - 💎 Gemini 3（SOTA推論、WebDev 1487 Elo、$2/1M入力）
    - 💎 Gemini 2.5 Pro（思考機能付き）
    - ⚡ Gemini 2.5 Flash（SWE-bench 54%、低コスト）
  - **APIキー管理**（AES-256-GCM暗号化）
  - **モデル選択ガイド**（ユースケース別推奨）
  - **コスト最適化**（日常チャット: Haiku 4.5、重要タスク: Opus 4.1）
- 通知設定
- シンプルに保つ

**優先度**: ⭐⭐⭐⭐⭐（AI設定部分は最高優先度）
**1ヶ月目**: **AI選択機能の完全実装** ← Week 1-2で実装
**3ヶ月目**: ユーザーレベルでのモデル選択、自動切り替え

**詳細仕様**: AI_SELECTION_SPEC.md 参照

---

#### 9. 通知 🔔
**現状**: システムからのリアルタイム通知
**改良後**:
- ゴール完了通知
- エージェント実行完了通知
- メンション通知
- Supabase Realtimeで即座に表示

**優先度**: ⭐⭐⭐
**1ヶ月目**: 基本的な通知（ゴール完了）
**3ヶ月目**: Slack連携、メール通知

---

### ❌ 削除する機能（2つ）

#### 削除: chat-simple
**理由**: chatと重複、シンプル版は不要
**対応**: chat-simpleを削除 → chatに一本化

---

#### 削除: simple-agent
**理由**: agentsページに一本化
**対応**: simple-agentを削除 → agentsに統合

---

### 🔀 統合する機能（1つ）

#### 統合: goals + tasks → **tasks**（タスク管理）
**理由**: ゴールとタスクは一体で管理すべき
**統合後の位置づけ**:
- ✅ ゴール作成（「いつまでにこれやって」）
- ✅ タスクの自動生成（エージェントが分解）
- ✅ タスクリストがバーっと見れる
- ✅ 「今どういう状況？」を確認
- ✅ 成果物の生成

**統合の方針**:
- `app/(app)/goals` を削除
- `app/(app)/tasks` にゴール機能を統合
- 1つのページで「ゴール → タスク → 進捗」が見れる

**階層構造**:
```
タスク管理ページ
├─ ゴール一覧
│  ├─ ゴール1: 新規事業の提案書作成
│  │  ├─ タスク1: 市場調査（完了）
│  │  ├─ タスク2: 競合分析（進行中）
│  │  └─ タスク3: 提案書作成（未着手）
│  └─ ゴール2: 営業資料のリニューアル
│     └─ タスク1: 現状分析（進行中）
└─ すべてのタスク一覧（フィルタリング可能）
```

---

## 🗺️ 開発戦略（なぜこの順番か）

### Phase 1（1ヶ月目）: 基盤 + 軽量機能

**何を作るか:**
1. マルチテナント基盤（法人・部署・ユーザー）
2. **AIチャット**（社内チャットボット）← 最優先
   - Slack的な使い方
   - チャット履歴管理
3. ナレッジ・ドキュメント管理
4. エージェント管理（一覧・プロンプト編集のみ）
5. ホーム（組織の健康状態）
6. **AI選択機能**（10モデル対応）← 早期実装

**なぜこの順番か:**

#### 理由1: デモしやすい
```
「社内チャットボット」は即座に価値が伝わる

デモ:
- 「〇〇の資料ある？」→ すぐ見つかる！
- 「△△の手順は？」→ ナレッジから回答！
- 「これ毎回聞かれるわ」→ ボタン1つでFAQ化！

→ 顧客が「これ便利やん！」と思う
```

#### 理由2: データが溜まる
```
AIチャットを使ってもらう
  ↓
ナレッジ・ドキュメントが溜まる
  ↓
次のPhaseでエージェントがこのデータを活用できる
```

#### 理由3: 技術的に簡単
```
AIチャット:
- 単一エージェント
- シンプルなRAG
- 複雑な連携なし

→ 早く完成する
→ 早くデモできる
→ 早くフィードバックもらえる
```

---

### Phase 2（2ヶ月目）: タスク管理（ゴール + タスク統合）+ マルチエージェント

**何を作るか:**
1. **タスク管理**（ゴール + タスク統合）← 統合
   - ゴール入力（「いつまでにこれやって」）
   - タスクの自動生成
   - タスクリストがバーっと見れる
   - 「今どういう状況？」を確認
   - 1つのページで完結
2. マルチエージェント連携
3. 成果物の自動生成
4. エージェント間の依存関係管理

**なぜこのタイミングか:**

#### 理由1: Phase 1でデータが溜まっている
```
ナレッジ・ドキュメントが既にある
  ↓
エージェントがこれを参照して動ける
  ↓
精度が高い
```

#### 理由2: 顧客が使い方を理解している
```
Phase 1で「AIチャット」に慣れた
  ↓
「もっと複雑なこともできるんや！」
  ↓
ゴール管理を受け入れやすい
```

#### 理由3: フィードバックを反映できる
```
Phase 1で顧客の声を聞いた
  ↓
「こんなエージェント欲しい」
「こんな成果物作りたい」
  ↓
Phase 2で実装
```

---

### Phase 3（3ヶ月目）: カスタマイズ + スケール

**何を作るか:**
1. カスタムエージェント作成（テンプレート）
2. ゴールテンプレートのカスタマイズ
3. 外部ツール連携（Slack、カレンダー）
4. 詳細な分析（ホームの強化）

**なぜこのタイミングか:**

#### 理由1: 顧客ごとの違いが見えてくる
```
Phase 2までで10-15社が使い始める
  ↓
「うちはこういうエージェント欲しい」
「うちはこんなゴールが多い」
  ↓
カスタマイズ機能が必要
```

#### 理由2: 差別化の強化
```
汎用的な機能 → どこでもできる
カスタマイズ → 他社にできない

→ 「自社専用AI」として価値が上がる
→ チャーンレート低下
```

---

## 📅 1ヶ月目のマイルストーン

### Week 1-2: 基盤整備 + 不要機能の削除

#### 開発タスク
- [ ] **不要機能の削除・統合**
  - [ ] `app/(app)/chat-simple` 削除
  - [ ] `app/(app)/simple-agent` 削除
  - [ ] `app/(app)/goals` 削除 → **tasksに統合**
  - [ ] `app/(app)/tasks` は残す（ゴール + タスク統合ページ）
  - [ ] ナビゲーションの更新

- [ ] **ホームの実装**
  - [ ] ダッシュボード → ホームに改名
  - [ ] **既存のanalyticsページの内容をホームに統合**
  - [ ] 組織健康状態の表示設計
  - [ ] 基本的な指標表示（アクティブユーザー数、チャット数など）

- [ ] **AI選択機能の実装** 🔥🔥🔥 **最優先、すぐできる、早期実装**

  **データベース設計**:
  - [ ] `company_settings` テーブルに `ai_model`, `ai_provider` 列を追加
  - [ ] `api_keys` テーブルを作成（暗号化されたAPIキーを保存）
  - [ ] RLS（Row Level Security）ポリシーを設定（会社管理者のみ）

  **暗号化**:
  - [ ] 暗号化/復号化関数を実装（`lib/crypto/encryption.ts`）
    - AES-256-GCM方式
  - [ ] `.env` に `ENCRYPTION_KEY` を追加（32バイトのランダムキー）

  **AI抽象化レイヤー**:
  - [ ] `BaseAIClient` 抽象クラス作成
  - [ ] `AnthropicClient` 実装
    - Claude Opus 4.1（`claude-opus-4-1`）
    - Claude Sonnet 4.5（`claude-sonnet-4-5`）
    - Claude Haiku 4.5（`claude-haiku-4-5`）← **デフォルト**
  - [ ] `OpenAIClient` 実装
    - GPT-5.1（`gpt-5.1`）
    - GPT-5（`gpt-5`）
    - GPT-5 Mini（`gpt-5-mini`）
    - GPT-5 Nano（`gpt-5-nano`）
  - [ ] `GoogleClient` 実装
    - Gemini 3（`gemini-3`）
    - Gemini 2.5 Pro（`gemini-2.5-pro`）
    - Gemini 2.5 Flash（`gemini-2.5-flash`）
  - [ ] `AIClientFactory` 実装（プロバイダーに応じてクライアント生成）
  - [ ] `getAIConfig()` ヘルパー実装（会社設定からAI設定を取得）

  **API Routes**:
  - [ ] `GET /api/settings/ai` - AI設定取得
  - [ ] `POST /api/settings/ai` - AI設定更新
  - [ ] `POST /api/settings/api-key` - APIキー保存（暗号化）
  - [ ] `POST /api/settings/test-connection` - 接続テスト

  **UI**:
  - [ ] 設定ページにAIモデル選択ドロップダウン追加
    - プロバイダーごとにグループ化（Anthropic, OpenAI, Google）
    - 各モデルの特徴とコストを表示
  - [ ] APIキー入力フォーム作成（3社分）
    - パスワード表示/非表示トグル
    - テスト接続ボタン
  - [ ] 保存ボタン実装

  **既存機能との統合**:
  - [ ] AIチャット（`/api/chat`）で選択されたモデルを使用
  - [ ] エージェント実行で選択されたモデルを使用

  **テスト**:
  - [ ] 全モデルで接続テスト（10モデル）
  - [ ] 暗号化/復号化のテスト
  - [ ] 権限テスト（一般ユーザーは設定変更不可）

  **推奨設定**:
  - 日常チャット → Claude Haiku 4.5（$1/1M、最速）
  - 重要タスク → Claude Opus 4.1（$15/1M、最高性能）
  - コーディング → Claude Sonnet 4.5（$3/1M、世界最高）
  - 大量処理 → GPT-5 Nano（$0.05/1M、超低コスト）

- [ ] **エージェント管理ページの実装** 🔥
  - [ ] Supabaseスキーマ設計（agents, agent_execution_logs）
  - [ ] エージェント一覧ページ（カード表示）
  - [ ] エージェント詳細・編集ページ
  - [ ] プロンプト編集機能
  - [ ] システムエージェントの登録（経営・営業・人事・財務・統合）

- [ ] **マルチテナント基盤**
  - [ ] Supabaseスキーマ設計（companies, departments, users）
  - [ ] Row Level Security（RLS）設定
  - [ ] 法人登録フロー
  - [ ] 部署作成・ユーザー招待

#### 売上目標
- 目標MRR: ¥0（準備期間）
- アクション: 初期ヒアリング 5-10社

---

### Week 3-4: コア機能の改良（AIチャット + RAG）

#### 開発タスク
- [ ] **AIチャットの改良** 🔥 **最優先**
  - [ ] **RAG最適化（ハイブリッド検索 + リランキング）← 最優先**
    - 全部取得 → 関連性の高い上位5件のみ
    - ベクトル検索 + 全文検索のハイブリッド
  - [ ] **参照したナレッジ/ドキュメントを明示 ← 超重要**
    - どのナレッジを引っ張ったか表示
    - 出典リンクを表示
    - 「この回答は〇〇のナレッジから引用しました」
  - [ ] ストリーミング応答の安定化
  - [ ] チャット履歴の管理（永続保存、検索可能）
  - [ ] エラーハンドリング強化

- [ ] **ナレッジ管理**
  - [ ] ナレッジテーブル設計
  - [ ] チャットからの「ナレッジ化」ボタン
  - [ ] ナレッジ一覧・検索
  - [ ] 部署内共有 vs 全社共有

- [ ] **ドキュメント管理**
  - [ ] ドキュメントテーブル設計
  - [ ] ファイルアップロード（PDF/DOCX）
  - [ ] テキスト抽出（pdf-parse, mammoth）
  - [ ] ドキュメント一覧・検索

#### 売上目標
- 目標MRR: ¥0（デモ準備中）
- アクション: デモ環境構築、5社にデモ

---

### 1ヶ月目完了時点のゴール

#### ✅ 開発ゴール
```
✅ 不要機能を削除し、コードベースがスッキリ（chat-simple, simple-agent）
✅ ゴールとタスクを統合（1つのタスク管理ページ）
✅ ホーム画面で組織の健康状態が見れる（既存analyticsを活用）
✅ AIチャットが高速・高精度（RAG最適化）
✅ 参照したナレッジ/ドキュメントが明示される ← NEW!
✅ AI選択機能（10モデル対応、暗号化保存）← NEW! 🔥
  - Claude Opus 4.1, Sonnet 4.5, Haiku 4.5
  - GPT-5.1, GPT-5, GPT-5 Mini, GPT-5 Nano
  - Gemini 3, Gemini 2.5 Pro, Gemini 2.5 Flash
✅ チャット履歴が永続保存され、検索可能
✅ ナレッジ管理が使える（チャットから簡単に保存）
✅ ドキュメント管理が使える（ファイルアップロード + 検索）
✅ エージェント管理が使える（一覧・プロンプト編集）
✅ 法人・部署・ユーザーの管理ができる
✅ デモができる状態
```

#### 💰 売上ゴール
```
目標MRR: ¥0（まだ契約なし）
デモ実施: 5社
契約見込み: 2-3社（次月契約予定）
```

---

## 🚀 3ヶ月目のマイルストーン

### Month 2: 初期顧客獲得 + フィードバック改善

#### 開発タスク
- [ ] **タスク管理の実装** 🔥 **ゴール + タスク統合**
  - [ ] データベース設計
    - [ ] `goals` テーブル（ゴール情報）
    - [ ] `tasks` テーブル（goal_id との紐付け）
  - [ ] ゴール作成機能
    - [ ] 「いつまでにこれやって」入力フォーム
    - [ ] エージェント選択UI
  - [ ] タスク自動生成機能
    - [ ] エージェントがゴールからタスクを分解
    - [ ] タスクリストを自動作成
  - [ ] タスク管理画面（統合ページ）
    - [ ] ゴール一覧表示
    - [ ] ゴールごとのタスクリスト表示
    - [ ] タスクがバーっと見れる
    - [ ] タスクごとの進捗・ステータス表示
    - [ ] リアルタイム更新（Supabase Realtime）
  - [ ] ゴールとタスクの階層表示

- [ ] **マルチエージェント連携の完成**
  - [ ] 統括エージェント実装
  - [ ] 部門別エージェント（営業・人事・財務・マーケ）
  - [ ] 並列実行制御
  - [ ] 依存関係の自動解決
  - [ ] 進捗のリアルタイム可視化

- [ ] **成果物の自動生成**
  - [ ] テンプレート設計（会議資料・レポート・提案書）
  - [ ] 生成エンジン（Claude Sonnet 4）
  - [ ] PDF/DOCX変換
  - [ ] ドキュメント管理への自動保存

- [ ] **顧客フィードバック対応**
  - [ ] バグ修正
  - [ ] UI/UX改善
  - [ ] パフォーマンス最適化

#### 売上目標
```
目標MRR: ¥300,000
契約企業: 3社（@¥100,000/月）
デモ実施: 10社
成約率: 30%
```

---

### Month 3: スケール準備 + 機能強化

#### 開発タスク
- [ ] **ホームの強化**
  - [ ] リアルタイム更新（Supabase Realtime）
  - [ ] アラート機能（異常検知）
  - [ ] 部署別の健康状態
  - [ ] トレンド分析

- [ ] **組織管理の強化**
  - [ ] 詳細な権限管理（ロールベース）
  - [ ] 組織図の可視化（インタラクティブ）
  - [ ] 部署階層の管理

- [ ] **ナレッジ + ドキュメントの強化**
  - [ ] 自動カテゴリ分類
  - [ ] レコメンド機能
  - [ ] 高度な検索（ファセット検索）

- [ ] **エージェント管理の強化**
  - [ ] カスタムエージェント作成（テンプレート）
  - [ ] エージェントの複製
  - [ ] バージョン管理（プロンプトの履歴）

- [ ] **外部ツール連携**
  - [ ] Slack通知
  - [ ] Googleカレンダー連携

#### 売上目標
```
目標MRR: ¥1,500,000
契約企業: 10-15社
平均単価: ¥100,000-150,000/月
チャーンレート: <5%
```

---

### 3ヶ月目完了時点のゴール

#### ✅ 開発ゴール
```
✅ マルチエージェント連携が完璧に動く
✅ タスク管理（ゴール + タスク統合）が完成 ← NEW!
✅ 「いつまでにこれやって」→ エージェントが全部動く
✅ タスクが自動生成される
✅ 「今どういう状況？」が1ページで見れる
✅ 成果物の自動生成（会議資料・レポート・提案書）
✅ カスタムエージェントが作成できる（テンプレート機能）
✅ 組織の健康状態がリアルタイムで見れる
✅ Slack連携が動く
✅ 安定稼働（同時50ユーザー対応）
```

#### 💰 売上ゴール
```
MRR: ¥1,500,000
契約企業: 10-15社
顧客満足度（NPS）: 50以上
契約継続率: 95%以上
```

---

## 💻 技術スタック

### なぜこの技術？

#### TypeScript統一
```
✅ フロント・バック統一 → 開発速度UP
✅ 型安全性 → バグ減少
✅ Vercelで即デプロイ → インフラ不要
✅ Next.js生態系 → ライブラリ豊富

❌ Python（LangGraph）
- フロント・バック分離 → 開発コスト増
- 起動遅い
- デプロイ複雑
```

#### Supabase
```
✅ PostgreSQL → リレーショナルデータに最適
✅ pgvector → RAGに対応
✅ Row Level Security → マルチテナント簡単
✅ Realtime → 進捗可視化に最適
✅ 実績あり → 5,000万レコード対応例

採用実績:
- Fortune 500企業で5,000万レコード対応
- 1,500万ドキュメント、1万ユーザー対応実績
```

#### AI選択機能（複数LLM対応）- 2025年11月最新版
```
✅ 設定画面でAIモデルを選択可能
✅ 法人ごと、ユーザーごとにカスタマイズ可能
✅ APIキーをAES-256-GCMで暗号化保存
✅ プロバイダーごとの抽象化レイヤー（統一インターフェース）
✅ ストリーミング対応（全プロバイダー）

【対応モデル - Anthropic (Claude)】
- 👑 Claude Opus 4.1: 最高性能、SWE-bench 74.5%（$15/$75）
- ⚡ Claude Sonnet 4.5: 世界最高のコーディング（$3/$15）
- 🚀 Claude Haiku 4.5: 最速、コスパ最強（$1/$5）← **デフォルト推奨**

【対応モデル - OpenAI (GPT)】
- 🌟 GPT-5.1: 最新、アダプティブ推論（$1.25/$10）
- 🔸 GPT-5: 最高の知能、AIME 94.6%（$1.25/$10）
- 🔹 GPT-5 Mini: 軽量、高速（$0.25/$2）
- 📦 GPT-5 Nano: 超低コスト（$0.05/$0.40）← **コスト重視**

【対応モデル - Google (Gemini)】
- 💎 Gemini 3: SOTA推論、WebDev 1487 Elo（$2/$12）
- 💎 Gemini 2.5 Pro: 思考機能付き
- ⚡ Gemini 2.5 Flash: SWE-bench 54%、低コスト

【ユースケース別推奨】
- 日常的な社内チャット → Claude Haiku 4.5（最速 + 最安クラス）
- 重要な経営判断、分析 → Claude Opus 4.1 / GPT-5（最高性能）
- コーディング、技術タスク → Claude Sonnet 4.5（世界最高）
- 最新技術、推論 → Gemini 3（SOTA）
- 超低コスト大量処理 → GPT-5 Nano（$0.05/1M）

【コスト最適化戦略】
1. デフォルトは Claude Haiku 4.5（$1/1M入力）
2. 重要タスクのみ Claude Opus 4.1（$15/1M入力）
3. 大量処理は GPT-5 Nano（$0.05/1M入力）
→ 月間コストを1/10に削減可能

【実装の特徴】
- ファクトリーパターンでプロバイダー切り替え容易
- ストリーミング対応で即座にレスポンス
- テスト接続機能で即座に動作確認
- 詳細仕様: AI_SELECTION_SPEC.md 参照
```

---

## 💰 AIモデルのコスト比較表（2025年11月最新版）

### 価格一覧（1M tokens あたり）

| モデル | プロバイダー | 入力単価 | 出力単価 | 速度 | 推奨用途 | 優先度 |
|--------|--------------|----------|----------|------|----------|--------|
| **Claude Opus 4.1** 👑 | Anthropic | $15 | $75 | 中速 | 最高性能、SWE-bench 74.5%、重要タスク | ⭐⭐⭐⭐⭐ |
| **Claude Sonnet 4.5** ⚡ | Anthropic | $3 | $15 | 中速 | 世界最高のコーディング | ⭐⭐⭐⭐⭐ |
| **Claude Haiku 4.5** 🚀 | Anthropic | **$1** | **$5** | **最速** | **日常チャット、コスパ最強** | ⭐⭐⭐⭐⭐ |
| **GPT-5.1** 🌟 | OpenAI | $1.25 | $10 | 中速 | 最新、アダプティブ推論 | ⭐⭐⭐⭐ |
| **GPT-5** 🔸 | OpenAI | $1.25 | $10 | 中速 | 最高の知能、AIME 94.6% | ⭐⭐⭐⭐⭐ |
| **GPT-5 Mini** 🔹 | OpenAI | $0.25 | $2 | 高速 | 軽量、高速 | ⭐⭐⭐⭐ |
| **GPT-5 Nano** 📦 | OpenAI | **$0.05** | **$0.40** | 超高速 | **超低コスト** | ⭐⭐⭐⭐ |
| **Gemini 3** 💎 | Google | $2 | $12 | 中速 | SOTA推論、WebDev 1487 Elo | ⭐⭐⭐⭐ |
| **Gemini 2.5 Pro** 💎 | Google | 未公開 | 未公開 | 中速 | 思考機能付き | ⭐⭐⭐ |
| **Gemini 2.5 Flash** ⚡ | Google | 未公開 | 未公開 | 高速 | SWE-bench 54%、低コスト | ⭐⭐⭐⭐ |

### コスト最適化シミュレーション

#### ケース1: 中堅企業（50名）
```
【月間使用量想定】
- 日常チャット: 500万トークン/月
- 重要タスク: 50万トークン/月

【パターンA: Claude Haiku 4.5のみ】
- 日常: 500万 × $1 / 1M = $500
- 重要: 50万 × $1 / 1M = $50
合計: $550/月 (¥82,500)

【パターンB: 使い分け（推奨）】
- 日常: 500万 × $1 / 1M = $500 (Haiku 4.5)
- 重要: 50万 × $15 / 1M = $750 (Opus 4.1)
合計: $1,250/月 (¥187,500)

【パターンC: GPT-5 Nanoで超コスト削減】
- 日常: 500万 × $0.05 / 1M = $25 (Nano)
- 重要: 50万 × $15 / 1M = $750 (Opus 4.1)
合計: $775/月 (¥116,250)
→ パターンAより38%削減！
```

#### ケース2: 大企業（500名）
```
【月間使用量想定】
- 日常チャット: 5,000万トークン/月
- 重要タスク: 500万トークン/月

【推奨構成】
- 日常: 5,000万 × $1 / 1M = $50,000 (Haiku 4.5)
- 重要: 500万 × $15 / 1M = $7,500 (Opus 4.1)
合計: $57,500/月 (¥8,625,000)

【超コスト削減構成】
- 日常: 5,000万 × $0.05 / 1M = $2,500 (Nano)
- 重要: 500万 × $15 / 1M = $7,500 (Opus 4.1)
合計: $10,000/月 (¥1,500,000)
→ 83%削減！
```

### 推奨設定まとめ

| 用途 | 推奨モデル | 理由 | 月間コスト目安 |
|------|-----------|------|----------------|
| **日常的な社内チャット** | Claude Haiku 4.5 | 最速 + コスパ最強（$1/1M） | 低 |
| **重要な経営判断・分析** | Claude Opus 4.1 / GPT-5 | 最高性能（$15/1M） | 中〜高 |
| **コーディング・技術タスク** | Claude Sonnet 4.5 | 世界最高（$3/1M） | 中 |
| **最新技術・推論** | Gemini 3 | SOTA（$2/1M） | 中 |
| **超低コスト大量処理** | GPT-5 Nano | 超低コスト（$0.05/1M） | 超低 |

---

## 🎨 UI/UX戦略

### シンプル vs リッチの使い分け

```
【シンプル】日常使い
- AIチャット
- ナレッジ検索
- ドキュメント検索

→ UI: ミニマル、高速
→ デザイン: 白黒ベース、余計なものなし

【リッチ】成果物作成
- ゴール管理
- エージェント実行
- 進捗可視化

→ UI: 情報量多め、可視化
→ デザイン: プログレスバー、ステップ表示
```

### 履歴重視

```
【AIチャット】
- チャット履歴が常に見える
- 過去の質問をすぐ見つけられる
- 「あの時何聞いたっけ？」を解決

【ゴール管理】
- 過去のゴールが一覧で見える
- 成果物がアーカイブされている
- 「前回どうやったっけ？」を解決
```

### 進捗の可視化

```
【ゴール管理】
エージェント実行中:
┌────────────────────────────────┐
│ 新規事業の提案書を作成          │
├────────────────────────────────┤
│ ● 市場調査AI       完了 ✓      │
│ ● 競合分析AI       完了 ✓      │
│ ◐ 戦略立案AI       実行中 60%   │
│ ○ レポート統合AI   待機中       │
└────────────────────────────────┘

→ リアルタイムで進捗が見える
→ 安心感
→ 「何やってるかわからん」を解決
```

---

## 🔗 機能連携の設計

### ゴール管理 ⇔ エージェント管理

```
【ゴール作成画面】
- 使用するエージェントを選択
- 「このエージェントがない」→ その場で作成
- エージェント管理画面でカスタマイズ
- ゴールに戻って実行
```

### AIチャット ⇔ ナレッジ管理

```
【AIチャット画面】
- よく聞かれる質問に回答
- 「ナレッジ化する」ボタン
  ↓
- ボタン押下で自動的にナレッジベースに保存
  ↓
- ナレッジが溜まる → AIの回答精度が上がる
```

### タスク管理（ゴール + タスク統合）⇔ ドキュメント管理

```
【タスク管理ページ】
「いつまでにこの案件をこうしたい」とゴール入力
  ↓
エージェントが自動でタスクを分解
  ↓
同じページでタスクリストが自動生成 ← 統合
  ↓
タスクリストがバーっと見れる
  ↓
「今どういう状況？」を同じページで確認
  ↓
成果物生成完了
  ↓
自動的に【ドキュメント管理】に保存
  ↓
- タイプ: 「提案書」
- タイトル: 自動
- 関連ゴール: リンク
  ↓
- ドキュメント管理から「どのゴールで作ったか」を追跡可能
- 「前回の提案書」をテンプレートにして新しいゴール作成

【AIチャットで確認】
「あの案件どうなった？」
  ↓
タスク管理の状況を参照して回答
```

---

## 📊 成功指標（KPI）

### Phase 1（1ヶ月目）

| 指標 | 目標 | なぜ測るか |
|------|------|-----------|
| AIチャット使用率 | DAU/MAU > 40% | 日常的に使われているか |
| チャット応答時間 | < 3秒 | ストレスなく使えるか |
| ナレッジ化回数 | > 10回/社 | データが溜まっているか |
| デモ実施数 | 5社 | 興味を持ってもらえるか |

---

### Phase 2（2ヶ月目）

| 指標 | 目標 | なぜ測るか |
|------|------|-----------|
| ゴール作成数 | > 5回/社/月 | 本格的に使われているか |
| エージェント成功率 | > 90% | 安定して動くか |
| 成果物の実用性 | > 80%（ユーザー評価） | 使える成果物か |
| MRR | ¥300,000 | 課金してもらえるか |

---

### Phase 3（3ヶ月目）

| 指標 | 目標 | なぜ測るか |
|------|------|-----------|
| カスタムエージェント数 | > 3体/社 | カスタマイズされているか |
| チャーンレート | < 5% | 継続して使われているか |
| NPS | > 50 | 推奨してもらえるか |
| MRR | ¥1,500,000 | スケールしているか |

---

## 🎯 まとめ：成功への道筋

### この戦略で何が達成できるか

```
Month 1:
✅ 社内チャットボットが使える
✅ ナレッジ・ドキュメントが溜まり始める
✅ デモで「便利やん！」と言われる
✅ 初期顧客の見込みができる

Month 2:
✅ ゴール管理で本格的な成果物が作れる
✅ マルチエージェントが動く
✅ 3社が課金し始める
✅ MRR ¥300,000

Month 3:
✅ カスタマイズ機能で差別化
✅ 10-15社が使っている
✅ 「自社専用AI」として定着
✅ MRR ¥1,500,000

Year 1:
✅ 100社
✅ ARR ¥100-200M
✅ プロダクトマーケットフィット達成
```

### 最も重要な原則

**1. 段階的な価値提供**
```
Phase 1: すぐ使える便利さ（チャットボット）
  ↓
Phase 2: 本格的な価値（成果物生成）
  ↓
Phase 3: 唯一無二の価値（カスタマイズ）
```

**2. データを溜める**
```
使えば使うほど賢くなる
  ↓
ナレッジが溜まる
  ↓
AIの精度が上がる
  ↓
さらに使われる
```

**3. 顧客の声を聞く**
```
Phase 1でフィードバック
  ↓
Phase 2で反映
  ↓
Phase 3で差別化
```

---

## 📝 次のアクション

### 今週中
1. [ ] このロードマップをレビュー・承認
2. [ ] 不要機能の削除開始
3. [ ] Supabaseスキーマ設計
4. [ ] 初期ヒアリング先リストアップ（10社）

### 来週
1. [ ] マルチテナント基盤の実装
2. [ ] ホームページの改修開始
3. [ ] 初期ヒアリング実施（5社）

### 今月中
1. [ ] コア機能の改良完了
2. [ ] デモ環境構築
3. [ ] デモ実施（5社）
4. [ ] フィードバック収集

---

**この戦略で、法人AIは「便利なツール」から「組織の一部」になる。**

---

**作成者**: Claude Code
**最終更新**: 2025年11月23日
