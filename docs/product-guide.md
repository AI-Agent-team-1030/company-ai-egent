# 法人AI - 完全ガイド

## 目次
1. [プロダクト概要](#1-プロダクト概要)
2. [ターゲットユーザー](#2-ターゲットユーザー)
3. [機能一覧](#3-機能一覧)
4. [使い方ガイド](#4-使い方ガイド)
5. [セキュリティ](#5-セキュリティ)
6. [技術仕様](#6-技術仕様)
7. [FAQ（よくある質問）](#7-faqよくある質問)
8. [トラブルシューティング](#8-トラブルシューティング)
9. [料金・プラン](#9-料金プラン)
10. [サポート・お問い合わせ](#10-サポートお問い合わせ)

---

## 1. プロダクト概要

### 1.1 法人AIとは？

**法人AI**は、企業向けの社内AIアシスタントプラットフォームです。社内ドキュメントをAIに学習させ、従業員がチャット形式で質問すると、社内情報に基づいた正確な回答を得られます。

### 1.2 解決する課題

| 課題 | 法人AIの解決策 |
|------|---------------|
| 社内情報が散在している | ナレッジボックスで一元管理 |
| 新入社員が何度も同じ質問をする | AIが24時間自動回答 |
| マニュアルを探すのに時間がかかる | AIが瞬時に検索・要約 |
| Googleドライブの資料が活用されていない | ドライブ連携で自動検索 |
| 回答の根拠が不明 | 引用元を明示して信頼性を担保 |

### 1.3 主な特徴

- **マルチAI対応**: Gemini、Claude、GPTから選択可能
- **ナレッジ検索**: 社内ドキュメントを自動で検索・参照
- **Googleドライブ連携**: 既存のドライブ資料も活用
- **引用表示**: どのドキュメントを参照したか明示
- **マルチテナント**: 企業ごとにデータ完全分離
- **日本語対応**: 全機能が日本語で利用可能

---

## 2. ターゲットユーザー

### 2.1 想定企業

| 企業規模 | 特徴 | メリット |
|---------|------|---------|
| スタートアップ（10-50名） | 少人数で情報共有が重要 | ナレッジの属人化を防止 |
| 中小企業（50-300名） | 部署間の情報共有が課題 | 全社的なナレッジ活用 |
| 中堅企業（300-1000名） | マニュアル・手順書が膨大 | AI検索で即座にアクセス |

### 2.2 想定ユーザー（役職別）

| 役職 | 利用シーン |
|------|-----------|
| **新入社員** | 業務手順、社内ルールの確認 |
| **一般社員** | マニュアル検索、過去資料の参照 |
| **マネージャー** | チームへの情報共有、FAQ整備 |
| **情報システム部門** | 社内システムの問い合わせ対応削減 |
| **人事部門** | 就業規則、福利厚生の問い合わせ対応 |
| **経営層** | 社内情報の可視化、業務効率化 |

### 2.3 想定業種

- IT・ソフトウェア
- コンサルティング
- 製造業
- 小売・サービス業
- 金融・保険
- 医療・ヘルスケア
- 教育機関

### 2.4 こんな企業におすすめ

- Googleワークスペースを利用している
- 社内マニュアルが多い
- 新入社員の教育コストを下げたい
- AIを業務に活用したい
- 情報セキュリティを重視している

---

## 3. 機能一覧

### 3.1 AIチャット機能

| 機能 | 説明 |
|------|------|
| マルチプロバイダー対応 | Gemini、Claude、GPTから選択 |
| ナレッジ検索 | 社内ドキュメントを自動検索して回答 |
| Googleドライブ検索 | ドライブ内のファイルも検索対象 |
| 会話履歴保存 | 過去の会話を保存・参照可能 |
| 引用表示 | 参照したドキュメントを明示 |
| タイピングエフェクト | 回答が段階的に表示 |
| 回答再生成 | 同じ質問で別の回答を生成 |
| Shift+Enter改行 | 複数行の質問が可能 |

### 3.2 ナレッジボックス機能

| 機能 | 説明 |
|------|------|
| ドキュメントアップロード | PDF、Word、Excel、テキスト等対応 |
| Googleドライブインポート | ドライブから直接インポート |
| フォルダ管理 | 階層構造で整理 |
| 自動インデックス化 | Gemini File Searchで検索可能に |
| ドキュメント削除 | 不要なファイルを削除 |

### 3.3 Googleドライブ連携

| 機能 | 説明 |
|------|------|
| OAuth認証 | Googleアカウントでログイン |
| 読み取り専用 | 書き込みは行わない |
| 会社レベル共有 | 接続したドライブを全社員が利用 |
| 自動検索 | チャット時に自動でドライブを検索 |
| Google Docs/Sheets対応 | テキスト内容を抽出して検索 |

### 3.4 設定機能

| 機能 | 説明 |
|------|------|
| プロフィール編集 | 表示名の変更 |
| APIキー管理 | Claude/GPTのAPIキーを登録 |
| ドライブ接続管理 | 接続・切断の管理 |

---

## 4. 使い方ガイド

### 4.1 初期設定

#### ステップ1: アカウント登録
1. 新規登録ページにアクセス
2. 企業名、メールアドレス、パスワードを入力
3. 「登録」をクリック
4. メール認証（必要な場合）

#### ステップ2: ログイン
1. ログインページにアクセス
2. 企業名、メールアドレス、パスワードを入力
3. 「ログイン」をクリック

#### ステップ3: 初期設定（任意）
1. 設定ページで表示名を変更
2. Claude/GPTを使う場合はAPIキーを登録
3. Googleドライブを連携（推奨）

### 4.2 ナレッジのアップロード

#### 方法1: ファイルを直接アップロード
1. ナレッジボックスページを開く
2. 「ファイルをアップロード」をクリック
3. ファイルを選択（PDF、Word、Excel等）
4. アップロード完了を待つ（自動でインデックス化）

#### 方法2: Googleドライブからインポート
1. ナレッジボックスページを開く
2. 「Googleドライブから選択」をクリック
3. ファイルを選択
4. 「インポート」をクリック

#### 対応ファイル形式
- PDF (.pdf)
- Microsoft Word (.doc, .docx)
- Microsoft Excel (.xls, .xlsx)
- Microsoft PowerPoint (.ppt, .pptx)
- テキストファイル (.txt)
- CSV (.csv)
- Google Docs
- Google Sheets

### 4.3 AIチャットの使い方

#### 基本的な使い方
1. チャットページを開く
2. 質問を入力
3. Enterで送信（Shift+Enterで改行）
4. AIの回答を確認
5. 引用情報で参照元を確認

#### ナレッジ検索のON/OFF
- 画面下部のトグルで切り替え
- ON: 社内ドキュメント+ドライブを検索して回答
- OFF: 一般的な知識のみで回答

#### AIモデルの切り替え
1. 画面上部のモデル選択ドロップダウンをクリック
2. 使用したいモデルを選択
   - **Gemini 2.5 Pro**: デフォルト、バランス型
   - **Gemini 2.5 Flash**: 高速回答
   - **Claude Sonnet 4.5**: 高精度（APIキー必要）
   - **Claude Haiku 4.5**: 軽量版（APIキー必要）
   - **GPT-5.1**: OpenAI製（APIキー必要）

### 4.4 Googleドライブの連携

#### 接続方法
1. 設定ページを開く
2. 「会社のGoogleドライブ連携」セクションへ
3. 「会社のGoogleドライブに接続」をクリック
4. Googleアカウントでログイン
5. 権限を許可
6. 接続完了

#### 接続後の動作
- チャット時にナレッジ検索ONなら自動でドライブも検索
- 検索結果に「Googleドライブ」タグが表示
- ファイルへの直接リンクも表示

#### 切断方法
1. 設定ページを開く
2. 「接続を解除」をクリック

### 4.5 会話履歴の管理

#### 新しい会話を始める
- サイドバーの「新しいチャット」をクリック

#### 過去の会話を見る
- サイドバーの会話一覧から選択

#### 会話を削除する
- 会話にカーソルを合わせ、ゴミ箱アイコンをクリック

---

## 5. セキュリティ

### 5.1 認証・認可

| 項目 | 説明 |
|------|------|
| 認証方式 | Firebase Authentication（Email/Password） |
| セッション管理 | Firebase自動管理 |
| OAuth | Googleドライブ連携時のみ使用 |
| 権限スコープ | drive.readonly（読み取りのみ） |

### 5.2 データ保護

| 項目 | 説明 |
|------|------|
| データベース | Cloud Firestore（Google Cloud） |
| 通信暗号化 | HTTPS（TLS 1.3） |
| データ分離 | 企業ごとにcompanyIdで完全分離 |
| APIキー保存 | Firestoreに暗号化保存 |

### 5.3 Firestoreセキュリティルール

```javascript
// プロフィール: 本人のみアクセス可能
match /profiles/{userId} {
  allow read, write: if request.auth.uid == userId;
}

// 会話: 認証ユーザーのみ
match /conversations/{conversationId} {
  allow read, write: if request.auth != null;
}

// ドキュメント: 認証ユーザーのみ
match /documents/{docId} {
  allow read, write: if request.auth != null;
}
```

### 5.4 Googleドライブ連携のセキュリティ

| 項目 | 説明 |
|------|------|
| 権限 | 読み取り専用（書き込み不可） |
| トークン保存 | Firestoreに会社レベルで保存 |
| 有効期限 | Google OAuth標準（1時間、自動更新） |
| 切断 | いつでも接続解除可能 |

### 5.5 AIプロバイダーのセキュリティ

| プロバイダー | データ取り扱い |
|-------------|---------------|
| Google (Gemini) | [Google AI Studio利用規約](https://ai.google.dev/terms)に準拠 |
| Anthropic (Claude) | [利用規約](https://www.anthropic.com/legal/aup)に準拠 |
| OpenAI (GPT) | [利用規約](https://openai.com/policies/terms-of-use)に準拠 |

### 5.6 コンプライアンス

- データは日本リージョンに保存可能（Firestore設定による）
- GDPR対応可能（データ削除リクエスト対応）
- SOC2対応はFirebase/Google Cloudが取得済み

---

## 6. 技術仕様

### 6.1 技術スタック

#### フロントエンド
| 技術 | バージョン | 用途 |
|------|-----------|------|
| Next.js | 14.x | フルスタックフレームワーク |
| React | 18.x | UIライブラリ |
| TypeScript | 5.x | 型安全な開発 |
| Tailwind CSS | 3.x | スタイリング |
| Framer Motion | - | アニメーション |

#### バックエンド・インフラ
| 技術 | 用途 |
|------|------|
| Firebase Authentication | ユーザー認証 |
| Cloud Firestore | データベース |
| Vercel | ホスティング |
| Google Cloud | インフラ基盤 |

#### AI・API
| サービス | 用途 |
|---------|------|
| Google Generative AI | Geminiモデル、File Search |
| Anthropic API | Claudeモデル |
| OpenAI API | GPTモデル |
| Google Drive API | ドライブ連携 |

### 6.2 対応AIモデル

| モデル | プロバイダー | 特徴 | APIキー |
|--------|------------|------|---------|
| gemini-2.5-pro | Google | デフォルト、バランス型 | 不要（標準搭載） |
| gemini-2.5-flash | Google | 高速、軽量 | 不要（標準搭載） |
| gemini-exp-1206 | Google | 実験版（Gemini 3） | 不要（標準搭載） |
| claude-sonnet-4-5 | Anthropic | 高精度、詳細な回答 | 必要 |
| claude-haiku-4-5 | Anthropic | 軽量、高速 | 必要 |
| gpt-5.1 | OpenAI | 汎用性が高い | 必要 |

### 6.3 対応ファイル形式

| 形式 | 拡張子 | MIMEタイプ |
|------|--------|-----------|
| PDF | .pdf | application/pdf |
| Word | .doc, .docx | application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document |
| Excel | .xls, .xlsx | application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet |
| PowerPoint | .ppt, .pptx | application/vnd.ms-powerpoint, application/vnd.openxmlformats-officedocument.presentationml.presentation |
| テキスト | .txt | text/plain |
| CSV | .csv | text/csv |
| Google Docs | - | application/vnd.google-apps.document |
| Google Sheets | - | application/vnd.google-apps.spreadsheet |

### 6.4 制限事項

| 項目 | 制限 |
|------|------|
| ファイルサイズ | 最大50MB/ファイル |
| 会話履歴 | 最新50件表示 |
| ドライブ検索結果 | 最大10件 |
| 抽出テキスト | 最初5000文字 |
| AIトークン | 最大4096トークン/回答 |

### 6.5 ブラウザ対応

| ブラウザ | バージョン | 対応状況 |
|---------|-----------|---------|
| Chrome | 最新2バージョン | 完全対応 |
| Firefox | 最新2バージョン | 完全対応 |
| Safari | 最新2バージョン | 完全対応 |
| Edge | 最新2バージョン | 完全対応 |
| IE | 全バージョン | 非対応 |

---

## 7. FAQ（よくある質問）

### 7.1 一般的な質問

#### Q: 法人AIとは何ですか？
**A:** 法人AIは、企業向けの社内AIアシスタントです。社内ドキュメントをアップロードすると、AIがその内容を学習し、従業員の質問に対して社内情報に基づいた回答を返します。

#### Q: 無料で使えますか？
**A:** Geminiモデル（標準搭載）は追加費用なしで利用できます。Claude/GPTを使用する場合は、各プロバイダーのAPIキーが必要です（従量課金）。

#### Q: スマートフォンでも使えますか？
**A:** はい、レスポンシブ対応しているため、スマートフォンやタブレットでも利用できます。

#### Q: 英語の質問にも答えられますか？
**A:** はい、AIは多言語対応しています。ただし、システムUIは日本語です。

---

### 7.2 アカウント・認証

#### Q: パスワードを忘れました
**A:** ログイン画面の「パスワードを忘れた方」からリセットできます。登録メールアドレスにリセットリンクが送信されます。

#### Q: 企業名を間違えてログインできません
**A:** 企業名は登録時と完全一致する必要があります。「株式会社」の有無、全角/半角の違いにご注意ください。

#### Q: 複数の社員で使えますか？
**A:** はい、同じ企業名で複数のアカウントを作成できます。ナレッジやドライブ連携は企業全体で共有されます。

#### Q: 退職者のアカウントを削除したい
**A:** 現在、管理者機能は未実装です。Firebase Consoleから直接ユーザーを削除するか、サポートにお問い合わせください。

---

### 7.3 ナレッジ・ドキュメント

#### Q: どんなファイルをアップロードできますか？
**A:** PDF、Word、Excel、PowerPoint、テキスト、CSVに対応しています。画像内のテキストは認識できません。

#### Q: アップロードしたファイルはどこに保存されますか？
**A:** Google Cloud（Firestore）に保存されます。企業ごとにデータは完全に分離されています。

#### Q: アップロードしたファイルを削除できますか？
**A:** はい、ナレッジボックスからファイルを選択して削除できます。削除するとAIの検索対象からも外れます。

#### Q: ファイルサイズの上限は？
**A:** 1ファイルあたり最大50MBです。

#### Q: アップロードしたらすぐに検索できますか？
**A:** アップロード後、約3-5秒でインデックス化が完了し、検索可能になります。

---

### 7.4 AIチャット

#### Q: AIの回答が間違っていることはありますか？
**A:** はい、AIは完璧ではありません。重要な判断は必ず原典を確認してください。引用情報から元ドキュメントを確認できます。

#### Q: ナレッジ検索をOFFにするとどうなりますか？
**A:** 社内ドキュメントを参照せず、AIの一般的な知識のみで回答します。社内固有の情報は含まれません。

#### Q: Claudeを使いたいのですがどうすればいいですか？
**A:**
1. [Anthropic Console](https://console.anthropic.com/)でAPIキーを取得
2. 設定ページでAPIキーを登録
3. チャット画面でClaudeモデルを選択

#### Q: 回答が途中で止まることがあります
**A:** ネットワーク接続を確認してください。改善しない場合は、ページを再読み込みしてください。

#### Q: 長文の質問を入力したい
**A:** Shift+Enterで改行できます。複数行の質問が可能です。

#### Q: 会話履歴は保存されますか？
**A:** はい、自動的にFirestoreに保存されます。サイドバーから過去の会話を参照できます。

---

### 7.5 Googleドライブ連携

#### Q: ドライブ連携は必須ですか？
**A:** いいえ、任意です。ナレッジボックスへの直接アップロードだけでも利用できます。

#### Q: 個人のGoogleドライブも検索されますか？
**A:** 接続したアカウントのドライブのみが検索対象です。会社のGoogle Workspaceアカウントで接続することを推奨します。

#### Q: 書き込み権限は必要ですか？
**A:** いいえ、読み取り専用（drive.readonly）のみです。ファイルの変更・削除は行いません。

#### Q: 特定のフォルダだけを検索対象にできますか？
**A:** 現在、ドライブ全体が検索対象です。フォルダ指定機能は今後対応予定です。

#### Q: 接続を解除するとどうなりますか？
**A:** ドライブの検索が無効になります。ナレッジボックスのファイルは引き続き検索されます。

---

### 7.6 セキュリティ

#### Q: データは安全ですか？
**A:** はい、以下の対策を実施しています：
- 通信はHTTPS（TLS 1.3）で暗号化
- データはGoogle Cloud（Firestore）に保存
- 企業ごとにデータを完全分離
- APIキーは暗号化して保存

#### Q: 他社にデータが見られることはありますか？
**A:** いいえ、企業ごとにcompanyIdでデータが分離されており、他社のデータにはアクセスできません。

#### Q: AIに送信したデータは学習に使われますか？
**A:** 各AIプロバイダーの利用規約に準じます。詳細は各プロバイダーのプライバシーポリシーをご確認ください。

#### Q: オンプレミス対応はしていますか？
**A:** 現在はクラウド（Firebase/Vercel）のみです。オンプレミス対応は個別にご相談ください。

---

### 7.7 料金・プラン

#### Q: 料金体系を教えてください
**A:**
- **Geminiモデル**: 標準搭載、追加費用なし
- **Claude/GPT**: 各プロバイダーのAPI従量課金

#### Q: APIキーの費用はどのくらいですか？
**A:**
- **Claude**: 約$3-15/100万トークン（モデルによる）
- **GPT**: 約$2-60/100万トークン（モデルによる）
- 一般的な利用で月額数百円〜数千円程度

#### Q: 企業向けプランはありますか？
**A:** カスタムプランについてはお問い合わせください。

---

## 8. トラブルシューティング

### 8.1 ログインできない

#### 症状: 「データベースへのアクセス権限がありません」
**原因**: Firestoreのセキュリティルールが未設定
**解決策**:
1. Firebase Console → Firestore → ルール
2. セキュリティルールを設定して「公開」
3. [詳細手順](./troubleshooting-google-drive.md)

#### 症状: 「企業名が登録情報と一致しません」
**原因**: 登録時と異なる企業名を入力
**解決策**: 登録時に入力した企業名を正確に入力（株式会社の有無、全角/半角に注意）

#### 症状: 「メールアドレスまたはパスワードが正しくありません」
**原因**: 認証情報の誤り
**解決策**: パスワードリセットを実行

---

### 8.2 Googleドライブ連携

#### 症状: 「ポップアップがブロックされました」
**原因**: ブラウザがポップアップをブロック
**解決策**:
1. アドレスバー右側のブロックアイコンをクリック
2. ポップアップを許可
3. 再度「接続」をクリック

#### 症状: 接続後もドライブが検索されない
**原因**: トークンの有効期限切れ
**解決策**:
1. 設定ページで接続を解除
2. 再度接続

#### 症状: 本番環境でのみ接続できない
**原因**: OAuth設定の不備
**解決策**:
1. Google Cloud Console → OAuth同意画面 → 承認済みドメイン確認
2. Firebase Console → Authentication → 承認済みドメイン確認
3. [詳細手順](./troubleshooting-google-drive.md)

---

### 8.3 AIチャット

#### 症状: 回答が表示されない
**原因**: APIエラー、ネットワーク問題
**解決策**:
1. ブラウザの開発者ツール（F12）でエラー確認
2. ページを再読み込み
3. 別のモデルに切り替えて試す

#### 症状: 「APIキーが設定されていません」
**原因**: Claude/GPTを選択したがAPIキー未設定
**解決策**:
1. 設定ページでAPIキーを登録
2. またはGeminiモデルを選択

#### 症状: ナレッジが検索されない
**原因**: ナレッジ検索がOFF、またはドキュメント未登録
**解決策**:
1. 画面下部のトグルでナレッジ検索をON
2. ナレッジボックスにドキュメントをアップロード

#### 症状: 回答が遅い
**原因**: ナレッジ検索+ドライブ検索で時間がかかる
**解決策**:
1. 軽量モデル（Gemini Flash、Claude Haiku）を選択
2. ナレッジ検索をOFFにして一般的な質問に

---

### 8.4 ナレッジボックス

#### 症状: ファイルアップロードが失敗する
**原因**: ファイルサイズ超過、非対応形式
**解決策**:
1. ファイルサイズを50MB以下に
2. 対応形式（PDF、Word、Excel等）を確認

#### 症状: アップロード後、検索に反映されない
**原因**: インデックス化に時間がかかっている
**解決策**:
1. 数秒待ってから再度検索
2. ページを再読み込み

---

## 9. 料金・プラン

### 9.1 基本料金

| 項目 | 料金 |
|------|------|
| 法人AI基本利用 | 要問い合わせ |
| Geminiモデル | 標準搭載（追加費用なし） |
| Claude/GPT | 各プロバイダーのAPI従量課金 |

### 9.2 APIキーの費用目安

| プロバイダー | モデル | 料金（目安） |
|-------------|--------|-------------|
| Anthropic | Claude Sonnet 4.5 | $3/100万入力トークン, $15/100万出力トークン |
| Anthropic | Claude Haiku 4.5 | $0.25/100万入力トークン, $1.25/100万出力トークン |
| OpenAI | GPT-4o | $2.5-10/100万トークン |

### 9.3 利用量の目安

- 1回の質問・回答: 約500-2000トークン
- 1日10回の質問: 約5,000-20,000トークン
- 1ヶ月（20営業日）: 約100,000-400,000トークン
- **月額費用目安**: 数百円〜数千円（Claude/GPT利用時）

---

## 10. サポート・お問い合わせ

### 10.1 サポート方法

| 方法 | 対応時間 | 用途 |
|------|---------|------|
| ドキュメント | 24時間 | 一般的な質問 |
| GitHub Issues | 24時間 | バグ報告、機能要望 |
| メールサポート | 平日10:00-18:00 | 個別相談 |

### 10.2 お問い合わせ先

- **GitHub**: [Issues](https://github.com/AI-Agent-team-1030/company-ai-egent/issues)
- **メール**: support@example.com（要設定）

### 10.3 フィードバック

製品の改善にご協力ください：
- 機能リクエスト → GitHub Issues
- バグ報告 → GitHub Issues
- 一般的なフィードバック → メール

---

## 更新履歴

| 日付 | バージョン | 内容 |
|------|-----------|------|
| 2025-11-27 | 2.0 | 初版作成 |

---

*このドキュメントは法人AI Version 2.0に基づいています。*
