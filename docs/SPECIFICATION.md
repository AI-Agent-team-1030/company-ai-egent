# 法人AIエージェントシステム 仕様書

## 📋 プロジェクト概要

### システム名
法人AIエージェントシステム

### 目的
複数のAIエージェントが連携し、企業の経営判断から各部門への指示展開、タスク実行までを支援する統合AIシステム

### 対象ユーザー
- 経営者
- 部門責任者
- 一般社員

---

## 🎨 デザインコンセプト

**白黒ベースのミニマルデザイン**
- シンプルで洗練されたUI
- 黒と白を基調としたモノクロームパレット
- 直感的で使いやすいインターフェース
- スムーズなアニメーションとマイクロインタラクション

---

## ✨ 主な機能

### 1. 📊 ダッシュボード
- リアルタイムで進行状況を一目で確認
- タスク完了率、稼働中のAI数、組織効率などの統計表示
- 進行中の指示と進捗バー
- AIエージェントの状態表示

### 2. 📈 アナリティクス
- ビジネスメトリクスの可視化
- KPIダッシュボード
- トレンド分析
- レポート生成

### 3. 💬 AIチャット
- Claude AIとのリアルタイム対話
- ナレッジベースを参照した回答生成（RAG）
- 会話履歴の保存と検索
- フォルダー別のチャット整理

### 4. 🎯 ゴール管理
- プロジェクトゴールの設定と追跡
- 進捗の可視化
- 関連タスクの管理
- 期限とマイルストーンの管理

### 5. 🤖 AIエージェント
- 複数のAIエージェントの管理
- エージェント間の連携設定
- タスクの自動分配
- エージェントの稼働状況モニタリング

### 6. 🧠 シンプルエージェント
- 軽量なAIエージェント機能
- 特定タスクに特化したエージェント
- 素早い応答と実行

### 7. 📚 ナレッジベース
- 組織の知識を蓄積・共有
- フォルダー階層での整理
- ドキュメントのアップロード（PDF, Word, Excel, CSV, 画像）
- タグとカテゴリによる分類
- 全文検索機能
- AIチャットでの参照

### 8. 📄 ドキュメント管理
- レポート、提案書、マニュアル、契約書の管理
- タイプ別フィルタリング
- 部門別の分類
- バージョン管理
- 公開/下書きのステータス管理

### 9. 🏢 組織図
- 組織構造の可視化
- 部門とメンバーの管理
- 役割と権限の設定

### 10. 🔔 通知
- システムからのリアルタイム通知
- 未読/既読の管理
- タイプ別アイコン表示（成功、警告、情報）

### 11. ⚙️ 設定
- プロフィール管理
- ユーザー名の設定
- Claude APIキーの管理
- 通知設定
- システム設定

---

## 🚀 技術スタック

### フロントエンド
- **フレームワーク**: Next.js 14 (App Router)
- **言語**: TypeScript
- **スタイリング**: Tailwind CSS
- **アニメーション**: Framer Motion
- **アイコン**: Heroicons
- **状態管理**: Zustand, React Context
- **日付処理**: date-fns
- **データ可視化**: Recharts
- **Markdown**: react-markdown, remark-gfm

### バックエンド
- **API**: Next.js API Routes
- **データベース**: Supabase (PostgreSQL)
- **認証**: Supabase Auth
- **ストレージ**: Supabase Storage
- **AI**: Claude API (Anthropic)

### ファイル処理
- **PDF**: pdf-parse-fork
- **Word**: mammoth
- **Excel**: xlsx, officeparser
- **CSV**: csv-parse
- **OCR**: tesseract.js

---

## 🗄️ データベース設計

### 主要テーブル

#### users
ユーザー情報（Supabase Authと連携）

#### app_settings
ユーザー設定（キーバリューストア）
- key: 設定キー（例: user_name, claude_api_key）
- value: 設定値
- user_id: ユーザーID

#### folders
フォルダー階層
- name: フォルダー名
- parent_id: 親フォルダーID（NULL = ルート）
- type: chat, knowledge, document
- user_id: 所有者

#### knowledge_items
ナレッジベースの項目
- title: タイトル
- content: 内容
- folder_id: 所属フォルダー
- file_url: アップロードファイルのURL
- file_type: ファイルタイプ
- metadata: メタデータ（JSON）
- user_id: 作成者

#### chat_conversations
チャット会話
- title: 会話タイトル
- folder_id: 所属フォルダー
- user_id: ユーザーID

#### chat_messages
チャットメッセージ
- conversation_id: 会話ID
- role: user, assistant, system
- content: メッセージ内容
- user_id: ユーザーID

### セキュリティ

**Row Level Security (RLS)**
- 全テーブルでRLSを有効化
- ユーザーは自分のデータのみアクセス可能
- 認証されていないユーザーはアクセス不可

---

## 🔐 セキュリティ仕様

### 認証
- Supabase Authによるメール/パスワード認証
- セッション管理
- 自動ログアウト機能

### データ保護
- Row Level Security (RLS)
- APIキーの暗号化保存
- HTTPS通信

### ファイルストレージ
- Supabase Storage使用
- アップロードファイルのサイズ制限
- ファイルタイプの検証

---

## 📱 UI/UX仕様

### レスポンシブデザイン
- デスクトップファースト
- タブレット対応
- モバイル対応（一部機能）

### アクセシビリティ
- セマンティックHTML
- キーボードナビゲーション
- ARIA属性

### パフォーマンス
- コード分割
- 画像最適化
- レイジーローディング

---

## 🔄 今後の拡張計画

詳細は [ROADMAP.md](./ROADMAP.md) を参照
