# 法人AI 戦略的ロードマップ

**最終更新**: 2025年11月23日
**目的**: 「何を作るか」だけでなく「なぜ・どうやって進めるか」を明確化

---

## 🎯 プロダクトの核心理解

### 法人AIの2つの顔

```
┌─────────────────────────────────────────────────────┐
│  法人AI = 2つの使い方                                │
├─────────────────────────────────────────────────────┤
│                                                     │
│  ① 社内チャットボット（軽量・日常使い）              │
│     ↓                                               │
│  【AIチャット】                                      │
│  - 社内情報を検索                                    │
│  - ナレッジ・ドキュメントから回答                    │
│  - チャット履歴を残す                                │
│  - 「〇〇の資料ある？」「△△の手順は？」            │
│                                                     │
│  ② 本格的なAIエージェント（重厚・成果物作成）       │
│     ↓                                               │
│  【ゴール管理 + エージェント】                       │
│  - ゴールを設定（例：「新規事業の提案書を作成」）   │
│  - エージェントが自動実行                            │
│  - 複数エージェントが連携                            │
│  - 成果物を生成                                      │
│  - 進捗を可視化                                      │
│                                                     │
└─────────────────────────────────────────────────────┘
```

### なぜこの区別が重要か？

**理由1: ユーザーの使い方が異なる**
```
社内チャットボット:
- 毎日使う
- サクッと知りたい
- 軽い質問

ゴール + エージェント:
- たまに使う（週1-2回）
- しっかり考えて実行
- 重い作業
```

**理由2: システムの作りが異なる**
```
社内チャットボット:
- 高速レスポンス（< 3秒）
- シンプルなRAG
- チャット履歴の管理

ゴール + エージェント:
- 時間がかかってもOK（30秒〜3分）
- 複雑なマルチエージェント連携
- 進捗・成果物の管理
```

**理由3: 売り方が異なる**
```
社内チャットボット:
→ 「社内の情報がすぐ見つかる！」

ゴール + エージェント:
→ 「経営指示が自動で各部門に展開される！」
→ 「提案書が自動で作られる！」
```

---

## 🏗️ システムアーキテクチャ（全体像）

### ページ構成

```
法人AI
├─ ホーム
│   └─ 組織の健康状態を表示
│
├─ AIチャット 💬【軽量・日常使い】
│   ├─ 社内情報検索
│   ├─ チャット履歴
│   └─ ナレッジ化ボタン
│
├─ ゴール管理 🎯【重厚・成果物作成】
│   ├─ ゴール一覧
│   ├─ ゴール作成（テンプレート）
│   ├─ 進捗可視化
│   └─ 成果物一覧
│       ↓
│       【ここでエージェントが自動実行】
│
├─ エージェント管理 🤖
│   ├─ システムエージェント（経営・営業・人事・財務）
│   ├─ カスタムエージェント
│   └─ プロンプト編集
│
├─ ナレッジベース 📚
│   ├─ FAQ
│   ├─ ベストプラクティス
│   └─ チャットから保存
│
├─ ドキュメント管理 📄
│   ├─ ファイルアップロード
│   ├─ 自動生成された成果物
│   └─ 検索
│
├─ 組織管理 🏢
│   ├─ 法人・部署・ユーザー
│   └─ 権限管理
│
└─ 設定 ⚙️
```

---

## 🔄 ユーザーフロー（重要）

### フロー1: 日常的な情報検索

```
ユーザー
  ↓
【AIチャット】を開く
  ↓
「〇〇の資料ある？」と質問
  ↓
AIが社内ナレッジ・ドキュメントから検索
  ↓
回答 + 参照元を表示
  ↓
（オプション）「ナレッジ化」ボタンでFAQに保存
```

**特徴:**
- 高速（< 3秒）
- 履歴が残る
- 気軽に使える

---

### フロー2: 本格的な成果物作成

```
経営者・マネージャー
  ↓
【ゴール管理】を開く
  ↓
「新規作成」→ テンプレート選択
（例：「新規事業の提案書を作成」）
  ↓
ゴールの詳細を入力
- タイトル
- 期限
- 必要なエージェント選択
  ↓
「実行」ボタン
  ↓
【エージェントが自動実行】
- 市場調査AI
- 競合分析AI
- 戦略立案AI
- レポート統合AI
  ↓
進捗を可視化
  ↓
成果物が完成
  ↓
【ドキュメント管理】に自動保存
```

**特徴:**
- 時間がかかる（30秒〜3分）
- 進捗が見える
- 成果物が残る

---

## 🗺️ 開発戦略（なぜこの順番か）

### Phase 1（1ヶ月目）: 基盤 + 軽量機能

**何を作るか:**
1. マルチテナント基盤（法人・部署・ユーザー）
2. AIチャット（社内チャットボット）
3. ナレッジ・ドキュメント管理
4. エージェント管理（一覧・プロンプト編集のみ）

**なぜこの順番か:**

#### 理由1: デモしやすい
```
「社内チャットボット」は即座に価値が伝わる

デモ:
- 「〇〇の資料ある？」→ すぐ見つかる！
- 「△△の手順は？」→ ナレッジから回答！
- 「これ毎回聞かれるわ」→ ボタン1つでFAQ化！

→ 顧客が「これ便利やん！」と思う
```

#### 理由2: データが溜まる
```
AIチャットを使ってもらう
  ↓
ナレッジ・ドキュメントが溜まる
  ↓
次のPhaseでエージェントがこのデータを活用できる
```

#### 理由3: 技術的に簡単
```
AIチャット:
- 単一エージェント
- シンプルなRAG
- 複雑な連携なし

→ 早く完成する
→ 早くデモできる
→ 早くフィードバックもらえる
```

---

### Phase 2（2ヶ月目）: ゴール管理 + マルチエージェント

**何を作るか:**
1. ゴール管理（作成・一覧・進捗）
2. マルチエージェント連携
3. 成果物の自動生成
4. エージェント間の依存関係管理

**なぜこのタイミングか:**

#### 理由1: Phase 1でデータが溜まっている
```
ナレッジ・ドキュメントが既にある
  ↓
エージェントがこれを参照して動ける
  ↓
精度が高い
```

#### 理由2: 顧客が使い方を理解している
```
Phase 1で「AIチャット」に慣れた
  ↓
「もっと複雑なこともできるんや！」
  ↓
ゴール管理を受け入れやすい
```

#### 理由3: フィードバックを反映できる
```
Phase 1で顧客の声を聞いた
  ↓
「こんなエージェント欲しい」
「こんな成果物作りたい」
  ↓
Phase 2で実装
```

---

### Phase 3（3ヶ月目）: カスタマイズ + スケール

**何を作るか:**
1. カスタムエージェント作成（テンプレート）
2. ゴールテンプレートのカスタマイズ
3. 外部ツール連携（Slack、カレンダー）
4. 詳細な分析ダッシュボード

**なぜこのタイミングか:**

#### 理由1: 顧客ごとの違いが見えてくる
```
Phase 2までで10-15社が使い始める
  ↓
「うちはこういうエージェント欲しい」
「うちはこんなゴールが多い」
  ↓
カスタマイズ機能が必要
```

#### 理由2: 差別化の強化
```
汎用的な機能 → どこでもできる
カスタマイズ → 他社にできない

→ 「自社専用AI」として価値が上がる
→ チャーンレート低下
```

---

## 🎨 UI/UX戦略

### 設計原則

#### 1. シンプル vs リッチの使い分け

```
【シンプル】日常使い
- AIチャット
- ナレッジ検索
- ドキュメント検索

→ UI: ミニマル、高速
→ デザイン: 白黒ベース、余計なものなし

【リッチ】成果物作成
- ゴール管理
- エージェント実行
- 進捗可視化

→ UI: 情報量多め、可視化
→ デザイン: プログレスバー、ステップ表示
```

#### 2. 履歴重視

```
【AIチャット】
- チャット履歴が常に見える
- 過去の質問をすぐ見つけられる
- 「あの時何聞いたっけ？」を解決

【ゴール管理】
- 過去のゴールが一覧で見える
- 成果物がアーカイブされている
- 「前回どうやったっけ？」を解決
```

#### 3. 進捗の可視化

```
【ゴール管理】
エージェント実行中:
┌────────────────────────────────┐
│ 新規事業の提案書を作成          │
├────────────────────────────────┤
│ ● 市場調査AI       完了 ✓      │
│ ● 競合分析AI       完了 ✓      │
│ ◐ 戦略立案AI       実行中 60%   │
│ ○ レポート統合AI   待機中       │
└────────────────────────────────┘

→ リアルタイムで進捗が見える
→ 安心感
→ 「何やってるかわからん」を解決
```

---

## 🔗 機能連携の設計

### ゴール管理 ⇔ エージェント管理

```
【ゴール作成画面】
┌────────────────────────────────┐
│ タイトル: [新規事業の提案書]    │
│ 期限:     [2025/12/31]         │
│                                │
│ 使用するエージェント:           │
│ ☑ 経営AI                       │
│ ☑ 市場調査AI                   │
│ ☑ 競合分析AI                   │
│ ☑ 戦略立案AI                   │
│ ☐ 営業AI                       │
│ ☐ 人事AI                       │
│                                │
│ [エージェントを追加]  →【エージェント管理】へ
└────────────────────────────────┘
```

**連携ポイント:**
1. ゴール作成時にエージェントを選択
2. 「このエージェントがない」→ その場で作成できる
3. エージェント管理画面に戻ってカスタマイズ
4. ゴールに戻って実行

---

### AIチャット ⇔ ナレッジ管理

```
【AIチャット画面】
┌────────────────────────────────┐
│ ユーザー: 新規事業の立ち上げ手順は？   │
│                                │
│ AI: 以下の手順です：            │
│   1. 市場調査                  │
│   2. 競合分析                  │
│   3. ...                       │
│                                │
│   📚 参照: ナレッジ「事業立ち上げ」 │
│                                │
│   [ナレッジ化する] ← ボタン     │
└────────────────────────────────┘

↓ ボタン押下

【ナレッジベース】に自動保存
```

**連携ポイント:**
1. よく聞かれる質問 → ボタン1つでナレッジ化
2. ナレッジが溜まる → AIの回答精度が上がる
3. 新しいメンバーも同じ質問しなくて済む

---

### ゴール管理 ⇔ ドキュメント管理

```
【ゴール管理】
成果物生成完了
  ↓
自動的に【ドキュメント管理】に保存
  ↓
タイプ: 「提案書」
タイトル: 「新規事業の提案書」
関連ゴール: リンク
作成日: 自動
```

**連携ポイント:**
1. ゴールで生成した成果物 → 自動でドキュメントに保存
2. ドキュメント管理から「どのゴールで作ったか」を追跡可能
3. 「前回の提案書」をテンプレートにして新しいゴール作成

---

## 💾 データ戦略

### 履歴の保存方針

#### AIチャット履歴

```sql
-- チャット履歴テーブル
CREATE TABLE chat_messages (
  id UUID PRIMARY KEY,
  company_id UUID NOT NULL,
  user_id UUID NOT NULL,
  session_id UUID NOT NULL,  -- セッションごとにグループ化

  role TEXT CHECK (role IN ('user', 'assistant')),
  content TEXT NOT NULL,

  -- RAG関連
  retrieved_knowledge JSONB,  -- 参照したナレッジ
  retrieved_documents JSONB,  -- 参照したドキュメント

  created_at TIMESTAMPTZ DEFAULT NOW(),

  INDEX idx_session (session_id, created_at),
  INDEX idx_user (user_id, created_at DESC)
);
```

**保存期間:**
- 全履歴を永続保存
- 検索可能
- セッション（会話の塊）で管理

**理由:**
- 「あの時何聞いたっけ？」を解決
- ナレッジ化のソース
- AIの学習データ

---

#### ゴール実行履歴

```sql
-- ゴールテーブル
CREATE TABLE goals (
  id UUID PRIMARY KEY,
  company_id UUID NOT NULL,
  created_by UUID NOT NULL,

  title TEXT NOT NULL,
  description TEXT,
  status TEXT CHECK (status IN ('draft', 'running', 'completed', 'failed')),

  -- エージェント
  selected_agents JSONB,  -- 使用するエージェントのID配列

  -- 成果物
  outputs JSONB,  -- 生成された成果物のリンク

  due_date TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  completed_at TIMESTAMPTZ,

  INDEX idx_company_status (company_id, status),
  INDEX idx_created_by (created_by, created_at DESC)
);

-- ゴール実行ログ
CREATE TABLE goal_executions (
  id UUID PRIMARY KEY,
  goal_id UUID NOT NULL REFERENCES goals(id),
  agent_id UUID NOT NULL REFERENCES agents(id),

  status TEXT CHECK (status IN ('pending', 'running', 'completed', 'failed')),
  progress DECIMAL(5,2),  -- 0.00 - 100.00

  input_data JSONB,
  output_data JSONB,
  error_message TEXT,

  started_at TIMESTAMPTZ,
  completed_at TIMESTAMPTZ,

  INDEX idx_goal (goal_id, started_at)
);
```

**保存内容:**
- すべてのゴール
- 実行履歴
- 進捗
- 成果物

**理由:**
- 「前回どうやったっけ？」を解決
- テンプレート化
- 改善のための分析

---

## 📊 成功指標（なぜこれを測るか）

### Phase 1（1ヶ月目）

| 指標 | 目標 | なぜ測るか |
|------|------|-----------|
| AIチャット使用率 | DAU/MAU > 40% | 日常的に使われているか |
| チャット応答時間 | < 3秒 | ストレスなく使えるか |
| ナレッジ化回数 | > 10回/社 | データが溜まっているか |
| デモ実施数 | 5社 | 興味を持ってもらえるか |

**判断基準:**
- AIチャット使用率 < 30% → UI/UXに問題あり
- 応答時間 > 5秒 → RAG最適化が必要
- ナレッジ化 < 5回/社 → 機能が使われていない（UI改善）

---

### Phase 2（2ヶ月目）

| 指標 | 目標 | なぜ測るか |
|------|------|-----------|
| ゴール作成数 | > 5回/社/月 | 本格的に使われているか |
| エージェント成功率 | > 90% | 安定して動くか |
| 成果物の実用性 | > 80%（ユーザー評価） | 使える成果物か |
| MRR | ¥300,000 | 課金してもらえるか |

**判断基準:**
- ゴール作成 < 3回/社/月 → ハードル高すぎ（テンプレート追加）
- 成功率 < 80% → エラーが多い（安定化必要）
- 実用性 < 70% → プロンプト改善、エージェント調整

---

### Phase 3（3ヶ月目）

| 指標 | 目標 | なぜ測るか |
|------|------|-----------|
| カスタムエージェント数 | > 3体/社 | カスタマイズされているか |
| チャーンレート | < 5% | 継続して使われているか |
| NPS | > 50 | 推奨してもらえるか |
| MRR | ¥1,500,000 | スケールしているか |

**判断基準:**
- カスタムエージェント < 1体/社 → 機能が使いにくい
- チャーンレート > 10% → 価値が伝わっていない
- NPS < 40 → 顧客満足度が低い

---

## 🛠️ 技術選定の理由

### TypeScript統一

**なぜTypeScript？**
```
✅ フロント・バック統一 → 開発速度UP
✅ 型安全性 → バグ減少
✅ Vercelで即デプロイ → インフラ不要
✅ Next.js生態系 → ライブラリ豊富

❌ Python（LangGraph）
- フロント・バック分離 → 開発コスト増
- 起動遅い
- デプロイ複雑
```

---

### Supabase

**なぜSupabase？**
```
✅ PostgreSQL → リレーショナルデータに最適
✅ pgvector → RAGに対応
✅ Row Level Security → マルチテナント簡単
✅ Realtime → 進捗可視化に最適
✅ 実績あり → 5,000万レコード対応例

❌ Firebase
- NoSQL → リレーショナルに弱い
- ベクトル検索未対応

❌ 自前PostgreSQL
- インフラ管理が必要
- Realtimeを自分で実装
```

---

### Claude Sonnet 4

**なぜClaude？**
```
✅ 100万トークン → 長いコンテキスト
✅ 高精度 → 信頼性
✅ 日本語に強い

【使い分け】
- 重要タスク → Claude
- 軽量タスク → Ollama（ローカル、コスト削減）
```

---

## 🎯 まとめ：成功への道筋

### この戦略で何が達成できるか

```
Month 1:
✅ 社内チャットボットが使える
✅ ナレッジ・ドキュメントが溜まり始める
✅ デモで「便利やん！」と言われる
✅ 初期顧客の見込みができる

Month 2:
✅ ゴール管理で本格的な成果物が作れる
✅ マルチエージェントが動く
✅ 3社が課金し始める
✅ MRR ¥300,000

Month 3:
✅ カスタマイズ機能で差別化
✅ 10-15社が使っている
✅ 「自社専用AI」として定着
✅ MRR ¥1,500,000

Year 1:
✅ 100社
✅ ARR ¥100-200M
✅ プロダクトマーケットフィット達成
```

### 最も重要な原則

**1. 段階的な価値提供**
```
Phase 1: すぐ使える便利さ（チャットボット）
  ↓
Phase 2: 本格的な価値（成果物生成）
  ↓
Phase 3: 唯一無二の価値（カスタマイズ）
```

**2. データを溜める**
```
使えば使うほど賢くなる
  ↓
ナレッジが溜まる
  ↓
AIの精度が上がる
  ↓
さらに使われる
```

**3. 顧客の声を聞く**
```
Phase 1でフィードバック
  ↓
Phase 2で反映
  ↓
Phase 3で差別化
```

---

## 📝 次のステップ

### 今すぐ決めること

1. **この戦略でいくか？**
   - AIチャット vs ゴール管理の分離
   - Phase 1-3の順番
   - 技術スタック

2. **UI/UXの方向性**
   - シンプル vs リッチの使い分け
   - 履歴重視
   - 進捗可視化

3. **開発体制**
   - 誰が何を担当？
   - 1ヶ月で完成できるか？

### 1週間以内に決めること

1. **詳細設計**
   - Supabaseスキーマ
   - ページ構成の最終化
   - エージェント連携フロー

2. **初期顧客候補**
   - 10社リストアップ
   - ヒアリング実施

---

**この戦略で、法人AIは「便利なツール」から「組織の一部」になる。**

---

**作成者**: Claude Code
**最終更新**: 2025年11月23日
